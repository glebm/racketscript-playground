import * as $rjs_core from '../../../../runtime/core.js';import * as M0 from "./private/color.rkt.js";import * as M1 from "../../../../runtime/kernel.rkt.js";import * as M2 from "../private/jscommon.rkt.js";import * as M3 from "../../../racketscript-compiler/racketscript/interop.rkt.js";var let_result66 = M1.make_struct_type($rjs_core.Symbol.make("posn"),false,2,0,false,M1.rnull,false,false,$rjs_core.Pair.makeList(0, 1),false,$rjs_core.Symbol.make("posn"));var struct_305 = let_result66.getAt(0);var make_306 = let_result66.getAt(1);var _p307 = let_result66.getAt(2);var _ref308 = let_result66.getAt(3);var _set_bang_309 = let_result66.getAt(4);var let_result67 = M1.values(struct_305,make_306,_p307,M1.make_struct_field_accessor(_ref308,0,$rjs_core.Symbol.make("x")),M1.make_struct_field_accessor(_ref308,1,$rjs_core.Symbol.make("y")));var struct_posn = let_result67.getAt(0);var make_posn = let_result67.getAt(1);var posn_p = let_result67.getAt(2);var posn_x = let_result67.getAt(3);var posn_y = let_result67.getAt(4);var print_image = function(d313) {var canvas314 = M2.document.createElement("canvas");var ctx315 = canvas314.getContext("2d");M2.document.body.appendChild(canvas314);M2.document.body.appendChild(M2.document.createElement("br"));canvas314.width = d313.width;canvas314.height = d313.height;M2.console.log(d313);ctx315.save();ctx315.translate(d313.width/2,d313.height/2);d313.render(ctx315,0,0);return ctx315.restore();};var canvas316 = M2.document.createElement("canvas");var _times_invisible_canvas_context_times_ = canvas316.getContext("2d");var empty_image = {'type':"empty-image",'width':0,'height':0,'render':function(ctx317, x318, y319) {return M1.rvoid();}};var image_height = function(i320) {return i320.height;};var image_width = function(i321) {return i321.width;};var EmptyScene = function(width322, height323, borders_p324) {this.type = "empty-scene";this.width = width322;this.height = height323;this.borders_p = borders_p324;return null;};EmptyScene.prototype.render = function(ctx325, x326, y327) {return M1.rvoid();};var Text = function(text328, size329, color330, face331, family332, style333, weight334, underline_p335) {this.type = "text";this.text = text328;this.size = size329;this.color = M0.string__gt_web_color(color330);this.face = face331;this.family = family332;this.style = style333;this.weight = weight334;this.underline = underline_p335;return this._updateMetrics();};Text.prototype._updateMetrics = function() {var font336 = M2._plus__plus_(this.weight," ",this.style," ",this.size,"px ",this.face," ",this.family);_times_invisible_canvas_context_times_.font = font336;var let_result68 = M1.values();var metrics337 = _times_invisible_canvas_context_times_.measureText(this.text);this.font = font336;this.width = metrics337.width;this.height = this.size;return null;};Text.prototype.render = function(ctx338, x339, y340) {ctx338.save();ctx338.translate(x339,y340);ctx338.font = this.font;ctx338.textAlign = "center";ctx338.textBaseline = "middle";ctx338.fillStyle = this.color;ctx338.fillText(this.text,0,0);return ctx338.restore();};var Line = function(x341, y342, pen_or_color343) {this.type = "line";this.width = M2.abs_plus_ceil(x341);this.height = M2.abs_plus_ceil(y342);this.mode = false;this.pen = pen_or_color343;return null;};Line.prototype.render = function(ctx344, x345, y346) {ctx344.save();var let_result69 = M1.values();ctx344.translate(x345,y346);var let_result70 = M1.values();ctx344.beginPath();var let_result71 = M1.values();var sx347 = M1._(M2.abs(this.x/2));var sy348 = M1._(M2.abs(this.y/2));if (M1._gt__eq_(x345,0)) {var if_res72 = M1._gt__eq_(y346,0);} else {var if_res72 = false;}if (if_res72) {ctx344.moveTo(sx347,sy348);var if_res79 = ctx344.lineTo(sx347+x345,sy348+y346);} else {if (M1._gt__eq_(x345,0)) {var if_res73 = M1._lt_(y346,0);} else {var if_res73 = false;}if (if_res73) {ctx344.moveTo(sx347+x345,sy348);var if_res78 = ctx344.lineTo(sx347,sy348-y346);} else {if (M1._lt_(x345,0)) {var if_res74 = M1._gt__eq_(y346,0);} else {var if_res74 = false;}if (if_res74) {ctx344.moveTo(sx347,sy348+y346);var if_res77 = ctx344.lineTo(sx347-x345,sy348);} else {if (M1._lt_(x345,0)) {var if_res75 = M1._lt_(y346,0);} else {var if_res75 = false;}if (if_res75) {ctx344.moveTo(sx347-x345,sy348-y346);var if_res76 = ctx344.lineTo(sx347,sy348);} else {var if_res76 = M1.rvoid();}var if_res77 = if_res76;}var if_res78 = if_res77;}var if_res79 = if_res78;}if_res79;if (M1.string_eq__p("outline","outline")) {ctx344.strokeStyle = M0.string__gt_web_color(this.pen);var if_res81 = ctx344.stroke();} else {if (M1.string_eq__p("outline","solid")) {ctx344.fillStyle = M0.string__gt_web_color(this.pen);var if_res80 = ctx344.fill();} else {var if_res80 = M1.rvoid();}var if_res81 = if_res80;}if_res81;ctx344.closePath();return ctx344.restore();};var Rectangle = function(width349, height350, mode351, pen_or_color352) {this.type = "rectangle";this.width = width349;this.height = height350;this.mode = mode351;this.pen = pen_or_color352;return null;};Rectangle.prototype.render = function(ctx353, x354, y355) {ctx353.save();ctx353.translate(x354,y355);ctx353.beginPath();var width356 = this.width;var height357 = this.height;var start_x358 = M1._(width356/2);var start_y359 = M1._(height357/2);ctx353.rect(start_x358,start_y359,width356,height357);if (M1.string_eq__p(this.mode,"outline")) {ctx353.strokeStyle = M0.string__gt_web_color(this.pen);var if_res83 = ctx353.stroke();} else {if (M1.string_eq__p(this.mode,"solid")) {ctx353.fillStyle = M0.string__gt_web_color(this.pen);var if_res82 = ctx353.fill();} else {var if_res82 = M1.rvoid();}var if_res83 = if_res82;}if_res83;ctx353.closePath();return ctx353.restore();};var Circle = function(radius360, mode361, pen_or_color362) {var diameter363 = radius360*2;this.type = "circle";this.radius = radius360;this.width = diameter363;this.height = diameter363;this.mode = mode361;this.pen = pen_or_color362;return null;};Circle.prototype.render = function(ctx364, x365, y366) {var radius367 = this.radius;ctx364.save();ctx364.translate(x365,y366);ctx364.beginPath();ctx364.ellipse(0,0,radius367,radius367,0,0,M2.Math.PI*2);if (M1.string_eq__p(this.mode,"outline")) {ctx364.strokeStyle = M0.string__gt_web_color(this.pen);var if_res85 = ctx364.stroke();} else {if (M1.string_eq__p(this.mode,"solid")) {ctx364.fillStyle = M0.string__gt_web_color(this.pen);var if_res84 = ctx364.fill();} else {var if_res84 = M1.rvoid();}var if_res85 = if_res84;}if_res85;ctx364.closePath();return ctx364.restore();};var empty_scene = function(width368, height369) {return new EmptyScene(width368,height369,false);};var text = function(txt370, size371, color372) {return new Text(txt370,size371,color372,"","serif","normal","normal",false);};var line = function(x373, y374, pen_or_color375) {return new Line(x373,y374,pen_or_color375);};var rectangle = function(w376, h377, m378, p379) {return new Rectangle(w376,h377,m378,p379);};var circle = function(r380, m381, p382) {return new Circle(r380,m381,p382);};var Overlay = function(x_place383, y_place384, ima385, imb386) {var ima_cx387 = ima385.width/2;var ima_cy388 = ima385.height/2;var imb_cx389 = imb386.width/2;var imb_cy390 = imb386.height/2;var tmp392 = x_place383;if (M1.equal_p(tmp392,"beside")) {var if_res86 = ima385.width+imb386.width;} else {var if_res86 = M2.max(ima385.width,imb386.width);}var width391 = if_res86;var tmp394 = y_place384;if (M1.equal_p(tmp394,"above")) {var if_res87 = ima385.height+imb386.height;} else {var if_res87 = M2.max(ima385.height,imb386.height);}var height393 = if_res87;var δ_edge_x395 = width391/2;var δ_edge_y396 = height393/2;var tmp399 = x_place383;if (M1.equal_p(tmp399,"left")) {var if_res92 = M1.values(ima_cx387-δ_edge_x395,imb_cx389-δ_edge_x395);} else {if (M1.equal_p(tmp399,"right")) {var if_res91 = M1.values(δ_edge_x395-ima_cx387,δ_edge_x395-imb_cx389);} else {if (M1.equal_p(tmp399,"beside")) {var if_res90 = M1.values(ima_cx387-δ_edge_x395,δ_edge_x395-imb_cx389);} else {if (M1.equal_p(tmp399,"middle")) {var if_res88 = true;} else {var if_res88 = M1.equal_p(tmp399,"center");}if (if_res88) {var if_res89 = M1.values(0,0);} else {var if_res89 = M1.error("invalid x-place align");}var if_res90 = if_res89;}var if_res91 = if_res90;}var if_res92 = if_res91;}var let_result93 = if_res92;var δ_a_x397 = let_result93.getAt(0);var δ_b_x398 = let_result93.getAt(1);var tmp402 = y_place384;if (M1.equal_p(tmp402,"top")) {var if_res98 = M1.values(ima_cy388-δ_edge_y396,imb_cy390-δ_edge_y396);} else {if (M1.equal_p(tmp402,"bottom")) {var if_res97 = M1.values(δ_edge_y396-ima_cy388,δ_edge_y396-imb_cy390);} else {if (M1.equal_p(tmp402,"above")) {var if_res96 = M1.values(ima_cy388-δ_edge_y396,δ_edge_y396-imb_cy390);} else {if (M1.equal_p(tmp402,"middle")) {var if_res94 = true;} else {var if_res94 = M1.equal_p(tmp402,"center");}if (if_res94) {var if_res95 = M1.values(0,0);} else {var if_res95 = M1.error("invalid y-place align");}var if_res96 = if_res95;}var if_res97 = if_res96;}var if_res98 = if_res97;}var let_result99 = if_res98;var δ_a_y400 = let_result99.getAt(0);var δ_b_y401 = let_result99.getAt(1);this.type = "overlay";this.ima = ima385;this.imb = imb386;this.width = width391;this.height = height393;this.aDx = δ_a_x397;this.aDy = δ_a_y400;this.bDx = δ_b_x398;this.bDy = δ_b_y401;return null;};Overlay.prototype.render = function(ctx403, x404, y405) {var ima406 = this.ima;var imb407 = this.imb;ctx403.save();ctx403.translate(x404,y405);imb407.render(ctx403,this.bDx,this.bDy);ima406.render(ctx403,this.aDx,this.aDy);return ctx403.restore();};var Container = function(childs408, posns409, width410, height411) {this.type = "container";this.childs = childs408;this.posns = posns409;this.width = width410;this.height = height411;return null;};Container.prototype.render = function(ctx412, x413, y414) {var width415 = this.width;var height416 = this.height;ctx412.save();ctx412.translate(x413-(width415/2),y414-(height416/2));ctx412.beginPath();ctx412.rect(0,0,M1.sub1(width415),M1.sub1(height416));ctx412.clip();var loop417 = function(childs418, posns419) {if (M1.null_p(childs418)) {var if_res100 = M1.rvoid();} else {var child420 = M1.car(childs418);var posn421 = M1.car(posns419);child420.render(ctx412,posn_x(posn421),posn_y(posn421));var if_res100 = loop417(M1.cdr(childs418),M1.cdr(posns419));}return if_res100;};loop417(this.childs,this.posns);return ctx412.restore();};var Rotate = function(image422, angle423) {var width424 = image422.width;var height425 = image422.height;var θ426 = (M2.Math.PI*angle423)/180.0;var sin_θ427 = M2.sin(θ426);var cos_θ428 = M2.cos(θ426);var x1429 = cos_θ428*width424;var y1430 = sin_θ427*width424;var x2431 = M1._(sin_θ427)*height425;var y2432 = cos_θ428*height425;var x3433 = x1429+x2431;var y3434 = y1430+y2432;var min_x435 = M2.min(0,x1429,x2431,x3433);var max_x436 = M2.max(0,x1429,x2431,x3433);var min_y437 = M2.min(0,y1430,y2432,y3434);var max_y438 = M2.max(0,y1430,y2432,y3434);var rotated_width439 = M2.floor(max_x436-min_x435);var rotated_height440 = M2.floor(max_y438-min_y437);this.image = image422;this.width = rotated_width439;this.height = rotated_height440;this.degrees = angle423;this.radians = θ426;return null;};Rotate.prototype.render = function(ctx441, x442, y443) {1;ctx441.save();ctx441.translate(x442,y443);ctx441.rotate(this.radians);this.image.render(ctx441,0,0);return ctx441.restore();};var container = function(childs444, posns445, width446, height447) {return new Container(childs444,posns445,width446,height447);};var place_image = function(child448, cx449, cy450, base451) {var width452 = base451.width;var height453 = base451.height;return container(M1.list(base451,child448),M1.list(make_posn(width452/2,height453/2),make_posn(cx449,cy450)),width452,height453);};var place_images = function(images454, posns455, scene456) {var width457 = scene456.width;var height458 = scene456.height;return container(M1.cons(scene456,images454),M1.cons(make_posn(width457/2,height458/2),posns455),width457,height458);};var overlay_by_align = function() {var x_place460 = arguments[0];var y_place461 = arguments[1];var ima462 = arguments[2];var imb463 = arguments[3];var imn464 = $rjs_core.Pair.listFromArray($rjs_core.argumentsSlice($rjs_core.argumentsToArray(arguments),4));return M1.foldl(function(img465, acc466) {return new Overlay(x_place460,y_place461,acc466,img465);},empty_image,M1.cons(ima462,M1.cons(imb463,imn464)));};var overlay = function() {var ima467 = arguments[0];var imb468 = arguments[1];var imn469 = $rjs_core.Pair.listFromArray($rjs_core.argumentsSlice($rjs_core.argumentsToArray(arguments),2));return M1.foldl(function(img470, acc471) {return new Overlay("middle","middle",acc471,img470);},empty_image,M1.cons(ima467,M1.cons(imb468,imn469)));};var above_by_align = function() {var x_place472 = arguments[0];var i1473 = arguments[1];var i2474 = arguments[2];var is475 = $rjs_core.Pair.listFromArray($rjs_core.argumentsSlice($rjs_core.argumentsToArray(arguments),3));return M1.foldl(function(img476, acc477) {return new Overlay(x_place472,"above",acc477,img476);},empty_image,M1.cons(i1473,M1.cons(i2474,is475)));};var above = function() {var i1478 = arguments[0];var i2479 = arguments[1];var is480 = $rjs_core.Pair.listFromArray($rjs_core.argumentsSlice($rjs_core.argumentsToArray(arguments),2));return M1.foldl(function(img481, acc482) {return new Overlay("middle","above",acc482,img481);},empty_image,M1.cons(i1478,M1.cons(i2479,is480)));};var beside_by_align = function() {var y_place483 = arguments[0];var i1484 = arguments[1];var i2485 = arguments[2];var is486 = $rjs_core.Pair.listFromArray($rjs_core.argumentsSlice($rjs_core.argumentsToArray(arguments),3));return M1.foldl(function(img487, acc488) {return new Overlay("beside",y_place483,acc488,img487);},empty_image,M1.cons(i1484,M1.cons(i2485,is486)));};var beside = function() {var i1489 = arguments[0];var i2490 = arguments[1];var is491 = $rjs_core.Pair.listFromArray($rjs_core.argumentsSlice($rjs_core.argumentsToArray(arguments),2));return M1.foldl(function(img492, acc493) {return new Overlay("beside","middle",acc493,img492);},empty_image,M1.cons(i1489,M1.cons(i2490,is491)));};var rotate = function(angle494, image495) {return new Rotate(image495,M1._(angle494));};export { empty_image,empty_scene,image_height,image_width,line,rectangle,circle,text,place_image,place_images,overlay_by_align,overlay,above_by_align,above,beside_by_align,beside,rotate,print_image,struct_posn,make_posn,posn_p,posn_y,posn_x };